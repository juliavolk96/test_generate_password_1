<h1>Password Generator</h1>
<%= form_with url: generate_password_path, method: :post, local: true, html: { class: 'password-form' } do |form| %>
  <div>
    <%= form.label :case_option, "Case Option" %>
    <%= form.select :case_option, options_for_select([['Uppercase', 'uppercase'], ['Lowercase', 'lowercase'], ['Mixed', 'mixed'], ['Capitalize', 'capitalize']], 'lowercase') %>
  </div>
  
  <div>
    <%= form.label :add_non_letter, "Add Non-Letter Characters" %>
    <%= form.check_box :add_non_letter, class: 'add-non-letter-checkbox' %>
  </div>
  
  <div class="non-letter-container">
    <%= form.label :non_letter_count, "Non-Letter Count" %>
    <%= form.number_field :non_letter_count, min: 0, max: 2, value: 0 %>
  </div>
  
  <div>
    <%= form.label :password_length, "Password Length" %>
    <%= form.number_field :password_length, min: 4, max: 12, value: 12 %>
  </div>

  <div>
    <%= form.submit "Generate Password" %>
  </div>

  <% if @password %>
    <div>
      <p>Generated Password: <%= @password %></p>
    </div>
  <% end %>
<% end %>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const addNonLetterCheckbox = document.querySelector('.add-non-letter-checkbox');
    const nonLetterContainer = document.querySelector('.non-letter-container');
    const nonLetterCountField = document.querySelector('#non_letter_count');

    nonLetterContainer.style.display = addNonLetterCheckbox.checked ? 'block' : 'none';

    addNonLetterCheckbox.addEventListener('change', function() {
      nonLetterContainer.style.display = this.checked ? 'block' : 'none';
      if (!this.checked) {
        nonLetterCountField.value = 0;
      }
    });

    document.querySelector('.password-form').addEventListener('submit', function(event) {
      if (!addNonLetterCheckbox.checked) {
        nonLetterCountField.value = 0;
      }
    });
  });
</script>